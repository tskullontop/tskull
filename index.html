<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Catch Green Blocks!</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: url('background.png') no-repeat center center fixed;
      background-size: cover;
      font-family: Arial, sans-serif;
    }
    canvas {
      display: block;
    }
    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 20px;
      color: white;
      text-shadow: 1px 1px 2px black;
      user-select: none;
    }
  </style>
</head>
<body>
  <div id="score">Score: 0</div>
  <canvas id="gameCanvas"></canvas>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const canvas = document.getElementById('gameCanvas');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      let score = 0;
      const scoreEl = document.getElementById('score');

      const playerImg = new Image();
      playerImg.src = 'selfie.png';

      const greenImages = ['milk.png', 'syn.png'].map(src => {
        const img = new Image();
        img.src = src;
        return img;
      });

      const redImages = ['2man.png', 'man.png'].map(src => {
        const img = new Image();
        img.src = src;
        return img;
      });

      const player = {
        x: canvas.width / 2 - 25,
        y: canvas.height - 120,
        width: 120,
        height: 120,
        speed: 7,
      };

      const keys = { left: false, right: false };

      document.addEventListener('keydown', (e) => {
        if (e.key.toLowerCase() === 'a') keys.left = true;
        if (e.key.toLowerCase() === 'd') keys.right = true;
      });

      document.addEventListener('keyup', (e) => {
        if (e.key.toLowerCase() === 'a') keys.left = false;
        if (e.key.toLowerCase() === 'd') keys.right = false;
      });

      class Block {
        constructor(x, y, type) {
          this.x = x;
          this.y = y;
          this.size = 100; // bigger blocks
          this.speed = 0.5 + Math.random() * 0.5;
          this.type = type;
          const imgs = type === 'green' ? greenImages : redImages;
          this.image = imgs[Math.floor(Math.random() * imgs.length)];
        }

        draw() {
          ctx.drawImage(this.image, this.x, this.y, this.size, this.size);
        }

        update() {
          this.y += this.speed;
          this.draw();
        }
      }

      const blocks = [];

      function spawnBlock() {
        const x = Math.random() * (canvas.width - 100);
        const type = Math.random() < 0.6 ? 'red' : 'green';
        blocks.push(new Block(x, -100, type));
      }

      function updatePlayer() {
        if (keys.left && player.x > 0) player.x -= player.speed;
        if (keys.right && player.x + player.width < canvas.width) player.x += player.speed;
        ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);
      }

      function detectCollisions() {
        for (let i = blocks.length - 1; i >= 0; i--) {
          const b = blocks[i];
          if (
            b.x < player.x + player.width &&
            b.x + b.size > player.x &&
            b.y < player.y + player.height &&
            b.y + b.size > player.y
          ) {
            if (b.type === 'green') score += 1;
            else score -= 1;
            blocks.splice(i, 1);
            scoreEl.textContent = `Score: ${score}`;
          } else if (b.y > canvas.height) {
            blocks.splice(i, 1);
          }
        }
      }

      playerImg.onload = () => {
        setInterval(spawnBlock, 1200);
        gameLoop();
      };

      function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        updatePlayer();
        detectCollisions();
        blocks.forEach(block => block.update());
        requestAnimationFrame(gameLoop);
      }

      window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });
    });
  </script>
</body>
</html>
